jQuery(function(c){var t,o,l,e,a,f=(o=("https:"==location.protocol?"https:":"http:")+"//formoid.net/api/push",l=8==(t=(/MSIE (\d+)\./.exec(navigator.userAgent)||[0,0])[1])||9==t&&"file:"!=location.protocol?function(t,e){var a=new XDomainRequest,i=c.Deferred();return a.open(e.type,t),a.onload=function(){i.resolve(this.responseText)},a.onerror=function(){i.reject()},a.send(e.data),i}:(c.support.cors=!0,c.ajax),e=function(t,e){return t="__"+t+"__",e.length?(this[t]=e[0],this):this[t]},(a=function(t){t=t||{},this.__email__=t.email||"",this.__title__=t.title||"",this.__data__=t.data||[]}).prototype.email=function(t){return e.call(this,"email",arguments)},a.prototype.title=function(t){return e.call(this,"title",arguments)},a.prototype.data=function(t){return e.call(this,"data",arguments)},a.prototype.send=function(t,e){var a,i,r,n=(a=c.Deferred(),i=this,r=["email","title","data","send"],c.each(r,function(t,e){a[e]=function(){return i[e].apply(i,arguments)}}),a);return e&&(e.call(this,n),"pending"!=n.state())||l(o,{type:"POST",data:JSON.stringify({email:this.__email__,form:{title:this.__title__,data:arguments.length?t:this.__data__}})}).done(function(t){try{var e=JSON.parse(t);e.error?n.reject(e.error):n.resolve(e.response)}catch(t){n.reject("Incorrect server response.")}}).fail(function(){var t="Failed to query the server. ";"onLine"in navigator&&!navigator.onLine?t+="No connection to the Internet.":t+="Check the connection and try again.",n.reject(t)}),n},{Form:function(t){return new a(t)}});c('[data-form-type="formoid"]').each(function(){var i,r=c(this),n=r.is("form")?r:r.find("form"),o=r.find("[data-form-alert]"),l=r.is("[data-form-title]")?r:r.find("[data-form-title]"),s=r.find('[type="submit"]'),d=o.html();s.click(function(){n.addClass("form-active")}),n.submit(function(t){if(t.preventDefault(),n.addClass("form-active"),!s.hasClass("btn-loading")){var e=!0,a=[];i=i||f.Form({email:r.find("[data-form-email]").val(),title:l.attr("data-form-title")||l.text()}),o.html(""),r.find("[data-form-field]").each(function(){(function(t){if(t.checkValidity)return t.checkValidity();var e=!0,a=c(t).val(),i=c(t).attr("type");return a?e=!("email"===i&&!/^([^@]+?)@(([a-z0-9]-*)*[a-z0-9]+\.)+([a-z0-9]+)$/i.test(a)):c(t).attr("required")&&(e=!1),c(t)[(e?"remove":"add")+"Class"]("form-invalid"),e})(this)||(e=!1),a.push([c(this).attr("data-form-field")||c(this).attr("name"),c(this).val()])}),e&&(s.addClass("btn-loading").prop("disabled",!0),i.send(a).done(function(t){n.removeClass("form-active"),r.find("[data-form-field]").val(""),o.removeAttr("hidden"),o.append(c('<div class="alert alert-form alert-success text-xs-center"/>').text(d||t))}).fail(function(t){o.append(c('<div class="alert alert-form alert-danger text-xs-center"/>').text(t))}).always(function(){s.removeClass("btn-loading").prop("disabled",!1)}))}})})});